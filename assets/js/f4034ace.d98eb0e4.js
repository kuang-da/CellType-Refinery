"use strict";(globalThis.webpackChunkcelltype_refinery_docs=globalThis.webpackChunkcelltype_refinery_docs||[]).push([[3779],{3134(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"modules/consolidation/overview","title":"Consolidation Overview","description":"The consolidation module finalizes cell-type annotations after iterative refinement, producing a single celltypefinal column with production-ready labels.","source":"@site/docs/modules/consolidation/overview.md","sourceDirName":"modules/consolidation","slug":"/modules/consolidation/overview","permalink":"/CellType-Refinery/docs/modules/consolidation/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/kuang-da/CellType-Refinery/tree/main/celltype-refinery-docs/docs/modules/consolidation/overview.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Iterative Refinement","permalink":"/CellType-Refinery/docs/modules/refinement/iterative-refinement"},"next":{"title":"Orphan Rescue","permalink":"/CellType-Refinery/docs/modules/consolidation/orphan-rescue"}}');var s=i(4848),t=i(8453);const r={sidebar_position:1},l="Consolidation Overview",a={},c=[{value:"Module Architecture",id:"module-architecture",level:2},{value:"Decision Flow",id:"decision-flow",level:2},{value:"Features",id:"features",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"consolidation-overview",children:"Consolidation Overview"})}),"\n",(0,s.jsxs)(n.p,{children:["The consolidation module finalizes cell-type annotations after iterative refinement, producing a single ",(0,s.jsx)(n.code,{children:"cell_type_final"})," column with production-ready labels."]}),"\n",(0,s.jsx)(n.h2,{id:"module-architecture",children:"Module Architecture"}),"\n",(0,s.jsx)(n.mermaid,{value:"flowchart LR\n    subgraph Inputs\n        A[refined.h5ad] --\x3e E\n        B[diagnostic_report.csv] --\x3e E\n        C[marker_scores.csv] --\x3e E\n        D[config.yaml] --\x3e E\n    end\n\n    subgraph Engine\n        E[ConsolidationEngine] --\x3e F{Orphan Rescue?}\n        F --\x3e|Yes| G[Detect Orphan Subtypes]\n        F --\x3e|No| H[Skip Rescue]\n        G --\x3e I{IEL Rescue?}\n        H --\x3e I\n        I --\x3e|Yes| J[Detect IEL Candidates]\n        I --\x3e|No| K[Skip IEL]\n        J --\x3e L[Harmonize Labels]\n        K --\x3e L\n    end\n\n    subgraph Outputs\n        L --\x3e M[consolidated.h5ad]\n        L --\x3e N[orphan_candidates.csv]\n        L --\x3e O[provenance.json]\n    end"}),"\n",(0,s.jsx)(n.h2,{id:"decision-flow",children:"Decision Flow"}),"\n",(0,s.jsx)(n.mermaid,{value:"flowchart TB\n    A[Cell from Refinement] --\x3e B{Has curated label?}\n    B --\x3e|Yes| C[Keep curated label]\n    B --\x3e|No| D{Strong subtype markers?}\n    D --\x3e|Yes| E{Weak root markers?}\n    D --\x3e|No| F[Assign Unassigned]\n    E --\x3e|Yes| G[Orphan Candidate]\n    E --\x3e|No| C\n    G --\x3e H{Plausible lineage?}\n    H --\x3e|Yes| I[Rescue as orphan subtype]\n    H --\x3e|No| F\n    C --\x3e J[cell_type_final]\n    I --\x3e J\n    F --\x3e J"}),"\n",(0,s.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Single output column"}),": ",(0,s.jsx)(n.code,{children:"cell_type_final"})," with clean, production-ready labels"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Orphan rescue"}),": Detects cells with strong subtype markers but weak root markers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"IEL rescue"}),": Recovers intraepithelial lymphocytes from epithelial clusters"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Label harmonization"}),": Standardizes naming conventions across annotations"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>r,x:()=>l});var o=i(6540);const s={},t=o.createContext(s);function r(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);