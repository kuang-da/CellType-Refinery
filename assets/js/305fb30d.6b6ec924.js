"use strict";(globalThis.webpackChunkcelltype_refinery_docs=globalThis.webpackChunkcelltype_refinery_docs||[]).push([[602],{4875(e,r,n){n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"modules/preprocessing/data-merging","title":"Data Merging","description":"Merge all samples into a unified AnnData object.","source":"@site/docs/modules/preprocessing/data-merging.md","sourceDirName":"modules/preprocessing","slug":"/modules/preprocessing/data-merging","permalink":"/CellType-Refinery/docs/modules/preprocessing/data-merging","draft":false,"unlisted":false,"editUrl":"https://github.com/kuang-da/CellType-Refinery/tree/main/celltype-refinery-docs/docs/modules/preprocessing/data-merging.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"docsSidebar","previous":{"title":"Batch Effect Correction","permalink":"/CellType-Refinery/docs/modules/preprocessing/batch-correction"},"next":{"title":"Clustering Overview","permalink":"/CellType-Refinery/docs/modules/clustering/overview"}}');var a=n(4848),s=n(8453);const i={sidebar_position:7},d="Data Merging",l={},c=[{value:"Layers Created",id:"layers-created",level:2},{value:"Spatial Graphs",id:"spatial-graphs",level:2},{value:"CLI",id:"cli",level:2}];function o(e){const r={code:"code",h1:"h1",h2:"h2",header:"header",mermaid:"mermaid",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.header,{children:(0,a.jsx)(r.h1,{id:"data-merging",children:"Data Merging"})}),"\n",(0,a.jsx)(r.p,{children:"Merge all samples into a unified AnnData object."}),"\n",(0,a.jsx)(r.mermaid,{value:'flowchart TD\n    subgraph Sources["Source Data"]\n        S1[Normalized<br/>Stage C]\n        S2[Aligned<br/>Stage D]\n        S3[Corrected<br/>Stage E]\n        S4[Metadata<br/>Stage A]\n    end\n\n    subgraph AnnData["merged_data.h5ad"]\n        direction TB\n        subgraph Layers\n            L1[raw layer]\n            L2[aligned layer]\n            L3[batchcorr layer]\n        end\n        subgraph Meta["Cell Metadata"]\n            M1[obs: cell info]\n            M2[var: markers]\n        end\n        subgraph Graphs["Spatial Graphs"]\n            G1[k-NN Graph]\n            G2[Radius Graph]\n        end\n    end\n\n    S1 --\x3e L1\n    S2 --\x3e L2\n    S3 --\x3e L3\n    S4 --\x3e M1\n    S4 --\x3e M2\n    M1 --\x3e G1\n    M1 --\x3e G2\n\n    style AnnData fill:#E6E6FA'}),"\n",(0,a.jsx)(r.h2,{id:"layers-created",children:"Layers Created"}),"\n",(0,a.jsxs)(r.table,{children:[(0,a.jsx)(r.thead,{children:(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.th,{children:"Layer"}),(0,a.jsx)(r.th,{children:"Source"}),(0,a.jsx)(r.th,{children:"Description"})]})}),(0,a.jsxs)(r.tbody,{children:[(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:(0,a.jsx)(r.code,{children:"raw"})}),(0,a.jsx)(r.td,{children:"Normalization"}),(0,a.jsx)(r.td,{children:"Normalized, not aligned"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:(0,a.jsx)(r.code,{children:"aligned"})}),(0,a.jsx)(r.td,{children:"Alignment"}),(0,a.jsx)(r.td,{children:"Cross-sample aligned"})]}),(0,a.jsxs)(r.tr,{children:[(0,a.jsx)(r.td,{children:(0,a.jsx)(r.code,{children:"batchcorr"})}),(0,a.jsx)(r.td,{children:"Batch Correction"}),(0,a.jsx)(r.td,{children:"Batch-corrected"})]})]})]}),"\n",(0,a.jsx)(r.h2,{id:"spatial-graphs",children:"Spatial Graphs"}),"\n",(0,a.jsx)(r.p,{children:"Builds k-NN or radius-based spatial graphs for each sample."}),"\n",(0,a.jsx)(r.h2,{id:"cli",children:"CLI"}),"\n",(0,a.jsx)(r.pre,{children:(0,a.jsx)(r.code,{className:"language-bash",children:"celltype-refinery preprocess merge \\\n  --input corrected/ \\\n  --graph-mode knn \\\n  --out output/merged.h5ad\n"})})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,a.jsx)(r,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},8453(e,r,n){n.d(r,{R:()=>i,x:()=>d});var t=n(6540);const a={},s=t.createContext(a);function i(e){const r=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);